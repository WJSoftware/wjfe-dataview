import{h as b,i as n,j as c,k as E,E as k,l as S,m as o,b as v,q as y,S as A}from"./runtime.CZHgF7la.js";import{h as N,H as g,r as q,d as _,e as R}from"./disclose-version.DFgEgxEJ.js";function x(a,f,i,r=null,t=!1){var s=null,e=null,l=null,h=t?k:0;b(()=>{if(l===(l=!!f()))return;let u=!1;if(N){const T=a.data===g;l===T&&(q(R),_(!1),u=!0)}l?(s?n(s):s=c(()=>i(a)),e&&E(e,()=>{e=null})):(e?n(e):r&&(e=c(()=>r(a))),s&&E(s,()=>{s=null})),u&&_(!0)},h)}function d(a,f){var r;var i=a&&((r=a[A])==null?void 0:r.t);return a===f||i===f}function D(a={},f,i,r){S(()=>{var t,s;return o(()=>{t=s,s=[],v(()=>{a!==i(...s)&&(f(a,...s),t&&d(i(...t),a)&&f(null,...t))})}),()=>{y(()=>{s&&d(i(...s),a)&&f(null,...s)})}})}export{D as b,x as i};
