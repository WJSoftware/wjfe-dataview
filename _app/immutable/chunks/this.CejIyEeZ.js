import{h as S,i as h,j as d,k as _,E as b,l as k,m as v,b as A,q as g,S as R}from"./runtime.DkqSkKrO.js";import{h as u,d as q,H as x,e as N,g as j,i as T,j as F}from"./disclose-version.nVD1GsKE.js";function O(a,f,r,i=null,t=!1){u&&q();var s=a,e=null,l=null,n=null,o=t?b:0;S(()=>{if(n===(n=!!f()))return;let c=!1;if(u){const y=s.data===x;n===y&&(s=N(),j(s),T(!1),c=!0)}n?(e?h(e):e=d(()=>r(s)),l&&_(l,()=>{l=null})):(l?h(l):i&&(l=d(()=>i(s))),e&&_(e,()=>{e=null})),c&&T(!0)},o),u&&(s=F)}function E(a,f){var i;var r=a&&((i=a[R])==null?void 0:i.t);return a===f||r===f}function Y(a={},f,r,i){return k(()=>{var t,s;return v(()=>{t=s,s=[],A(()=>{a!==r(...s)&&(f(a,...s),t&&E(r(...t),a)&&f(null,...t))})}),()=>{g(()=>{s&&E(r(...s),a)&&f(null,...s)})}}),a}export{Y as b,O as i};
